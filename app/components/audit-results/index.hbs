<section
  local-class='resultsRegion'
  role='region'
  aria-labelledby='results-heading'
  aria-busy={{@isLoading}}
  aria-atomic='true'
>
  <h2
    id='results-heading'
    tabindex='-1'
    {{did-insert this.captureHeading}}
    {{did-update this.onResultsChange @isLoading @results}}
  >
    Audit Results
  </h2>

  {{#if @isLoading}}
    <LoadingScreen @message='Running audit‚Ä¶' />

  {{else if (and @auditRun (gt (or @results.length 0) 0))}}
    <p local-class='sr-only' aria-live='polite'>
      Audit complete. Found
      {{@results.length}}
      issues.
    </p>
    <ul local-class='results'>
      {{#each @results key='id' as |violation index|}}
        <li id='violation-{{violation.id}}'>
          <h3 local-class='violationHeading'>
            {{violation.id}}
            ‚Äî
            {{violation.impact}}
          </h3>
          <p>{{violation.description}}</p>
          <p>{{violation.help}}</p>

          {{#if violation.nodes}}
            <ul local-class='violationNodes'>
              {{#each violation.nodes key='@index' as |node nodeIndex|}}
                <li>
                  <span local-class='fieldLabel'>Affected element:</span>
                  <code>{{get node 'target.0'}}</code>
                  <br />
                  <span local-class='fieldLabel'>HTML snippet:</span>
                  <code>{{node.html}}</code>
                </li>
              {{/each}}
            </ul>
          {{/if}}
        </li>
      {{/each}}
    </ul>

  {{else if (and @auditRun (eq (or @results.length 0) 0))}}
    <p local-class='sr-only' aria-live='polite'>
      Audit complete. No issues found.
    </p>
    <div local-class='no-violations'>
      <img
        src='/a11ycat-happy.png'
        alt=''
        role='presentation'
        local-class='happy-cat-image'
      />
      <span>Purrrfect, no accessibility issues found</span>
    </div>

  {{else if (and @htmlInput (not @auditRun))}}
    <p local-class='no-results-yet'>
      Click ‚ÄúRun Audit‚Äù to check your HTML for accessibility issues üîç
    </p>

  {{else}}
    <p local-class='no-input'>
      Paste some HTML to get started.
    </p>
  {{/if}}
</section>